---
description: "AI Workflow Engine - Apply State-Specific Behavior Based on Current Workflow State"
globs: "**/*"
alwaysApply: true
priority: 2
version: 1.0.0
tags: [workflow, states, behavior, mandatory]
---

# ğŸ”„ WORKFLOW STATES - BEHAVIOR ENFORCEMENT

âš ï¸  **CRITICAL:** State-based behavior (alwaysApply: true)

## ğŸ“Š SIX WORKFLOW STATES

After reading STATUS.txt, you know current state.
Apply corresponding behavior:

### ğŸ”µ UNDERSTANDING State
```
Meaning: Requirements being analyzed, no design yet

Your Behavior:
  âœ… Ask clarifying questions
  âœ… Understand requirements fully
  âœ… Identify ambiguities
  
  âŒ DON'T start coding yet
  âŒ DON'T make assumptions
  âŒ DON'T suggest commits

When to progress: User confirms understanding complete
```

### ğŸŸ¢ DESIGNING State
```
Meaning: Design approved, ready to implement

Your Behavior:
  âœ… Follow approved design/architecture
  âœ… Implement according to plan
  âœ… Create planned files
  
  âŒ DON'T change architecture without discussion
  âŒ DON'T suggest commits yet (no tests!)

When to progress: Implementation complete
```

### ğŸŸ¡ IMPLEMENTING State
```
Meaning: Code written, tests needed

Your Behavior:
  âœ… Write comprehensive unit tests
  âœ… Write integration tests if needed
  âœ… Test edge cases
  âœ… Ensure coverage >70%
  
  âŒ DON'T skip tests (MANDATORY!)
  âŒ DON'T suggest commits without tests
  âŒ DON'T say "tests can be added later"

When to progress: All tests written and passing
```

### ğŸŸ  TESTING State
```
Meaning: Tests passing, needs review

Your Behavior:
  âœ… Review code for quality
  âœ… Check requirements all satisfied
  âœ… Look for potential improvements
  âœ… Verify test coverage adequate
  
  âŒ DON'T skip review
  âŒ DON'T suggest commits yet

When to progress: Review complete, quality confirmed
```

### ğŸ”´ REVIEWING State
```
Meaning: Ready for validation

Your Behavior:
  âœ… Run: npx ai-workflow validate
  âœ… Check validation passes
  âœ… Fix any validation issues
  
  âŒ DON'T suggest commits without validation
  âŒ NEVER skip validation

When to progress: Validation passes
```

### ğŸŸ£ READY_TO_COMMIT State
```
Meaning: Validation passed, safe to commit

Your Behavior:
  âœ… Suggest commit with good message
  âœ… Include task reference
  âœ… Remind to complete task after
  
  âŒ DON'T suggest --no-verify
  âŒ DON'T bypass quality gates

After commit: Remind user to run npx ai-workflow task complete
```

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

## ğŸš« CRITICAL: State-Based Restrictions

**NEVER suggest commits unless state is READY_TO_COMMIT:**

```
If state is UNDERSTANDING:
  Response: "We're still in UNDERSTANDING state. Let's finalize requirements first."

If state is DESIGNING:
  Response: "Design is ready but no code yet. Let me implement first."

If state is IMPLEMENTING:
  Response: "Code is ready but needs tests. Let me add tests first."

If state is TESTING:
  Response: "Tests pass but needs review. Let me review quality first."

If state is REVIEWING:
  Response: "Review done. Let me run validation: npx ai-workflow validate"

Only if state is READY_TO_COMMIT:
  Response: "âœ“ Validation passed! Safe to commit: git commit -m 'feat: ...'"
```

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

**This rule uses alwaysApply: true**  
**State-based behavior is MANDATORY**  
**Prevents premature commits and skipped quality gates**
